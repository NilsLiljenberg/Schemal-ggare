<!DOCTYPE html>
<html lang="sv">
<head>
  <meta charset="UTF-8" />
  <title>Schemaläggare med tabbar</title>
  <style>
    body { font-family: Arial, sans-serif; margin: 20px; }
    .tabs {
      display: flex;
      border-bottom: 1px solid #ccc;
      margin-bottom: 15px;
      cursor: pointer;
    }
    .tab {
      padding: 10px 20px;
      border: 1px solid #ccc;
      border-bottom: none;
      background: #eee;
      margin-right: 5px;
      border-radius: 5px 5px 0 0;
    }
    .tab.active {
      background: white;
      font-weight: bold;
    }
    .tab-content {
      border: 1px solid #ccc;
      padding: 15px;
      border-radius: 0 5px 5px 5px;
    }
    table { border-collapse: collapse; width: 100%; max-width: 900px; }
    th, td { border: 1px solid #999; padding: 8px; text-align: center; }
    input[type="text"] { width: 100%; box-sizing: border-box; }
    button { margin-top: 15px; padding: 10px 20px; font-size: 16px; }
    label { cursor: pointer; }
  </style>
</head>
<body>

  <h1>Schemaläggare</h1>

  <div class="tabs">
    <div class="tab active" data-tab="medarbetare">Medarbetare</div>
    <div class="tab" data-tab="schema">Schema</div>
  </div>

  <div id="medarbetare" class="tab-content">
    <h2>Lägg till medarbetare</h2>
    <form id="addMedarbetareForm">
      <label>
        Namn:<br/>
        <input type="text" id="medarbetareNamn" required />
      </label>
      <br/><br/>
      <div id="balansCheckboxar">
        <!-- Här genereras kryssrutor för balanser via JS -->
      </div>
      <br/>
      <button type="submit">Lägg till medarbetare</button>
    </form>

    <h2>Lista på medarbetare</h2>
    <table id="medarbetareTabell">
      <thead>
        <tr>
          <th>Namn</th>
          <!-- Balans-namn kolumner genereras via JS -->
        </tr>
      </thead>
      <tbody>
        <!-- Medarbetare data genereras här -->
      </tbody>
    </table>
  </div>

  <div id="schema" class="tab-content" style="display:none;">
    <h2>Schema (kommer senare)</h2>
    <p>Här kan vi senare bygga schemat baserat på medarbetardata.</p>
  </div>

  <script>
    // Konfigurera balansnamn (kan sen göras redigerbara)
    const balansNamn = [];
    for(let i=1; i<=18; i++) {
      balansNamn.push('Balans ' + i);
    }

    // Data: alla medarbetare med behörigheter lagras här
    let medarbetareLista = [];

    // Visa balanser som kryssrutor i formuläret
    function visaBalansCheckboxar() {
      const container = document.getElementById('balansCheckboxar');
      container.innerHTML = '';
      balansNamn.forEach((balans, i) => {
        const id = 'balansChk' + i;
        const label = document.createElement('label');
        label.innerHTML = `<input type="checkbox" id="${id}" value="${balans}" checked> ${balans}`;
        container.appendChild(label);
        container.appendChild(document.createTextNode(' '));
      });
    }

    // Uppdatera tabellhuvud för medarbetare-tabellen
    function uppdateraMedarbetareTabellHeader() {
      const theadTr = document.querySelector('#medarbetareTabell thead tr');
      theadTr.innerHTML = '<th>Namn</th>';
      balansNamn.forEach(balans => {
        const th = document.createElement('th');
        th.textContent = balans;
        theadTr.appendChild(th);
      });
    }

    // Visa medarbetare i tabellen
    function visaMedarbetareLista() {
      const tbody = document.querySelector('#medarbetareTabell tbody');
      tbody.innerHTML = '';
      medarbetareLista.forEach(med => {
        const tr = document.createElement('tr');
        const tdNamn = document.createElement('td');
        tdNamn.textContent = med.namn;
        tr.appendChild(tdNamn);

        med.behorigheter.forEach(b => {
          const td = document.createElement('td');
          td.textContent = b ? '✓' : '';
          tr.appendChild(td);
        });

        tbody.appendChild(tr);
      });
    }

    // Hantera tabb-klick för att byta innehåll
    document.querySelectorAll('.tab').forEach(tab => {
      tab.addEventListener('click', () => {
        document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
        tab.classList.add('active');

        document.querySelectorAll('.tab-content').forEach(tc => tc.style.display = 'none');
        const tabId = tab.getAttribute('data-tab');
        document.getElementById(tabId).style.display = 'block';
      });
    });

    // Initiera
    visaBalansCheckboxar();
    uppdateraMedarbetareTabellHeader();

    // Lägg till medarbetare vid formulärsubmit
    document.getElementById('addMedarbetareForm').addEventListener('submit', (e) => {
      e.preventDefault();
      const namnInput = document.getElementById('medarbetareNamn');
      const namn = namnInput.value.trim();
      if(!namn) {
        alert('Ange ett namn!');
        return;
      }
      // Hämta kryssrutor och skapa behörighetsarray
      const behOrigheter = [];
      balansNamn.forEach((balans, i) => {
        const chk = document.getElementById('balansChk' + i);
        behOrigheter.push(chk.checked);
      });

      // Lägg till ny medarbetare i listan
      medarbetareLista.push({ namn, behorigheter: behOrigheter });
      // Rensa namn-input och kryssrutor
      namnInput.value = '';
      balansNamn.forEach((balans, i) => {
        document.getElementById('balansChk' + i).checked = true;
      });

      visaMedarbetareLista();
    });

    // Visa initialt tom lista
    visaMedarbetareLista();

  </script>
</body>
</html>
